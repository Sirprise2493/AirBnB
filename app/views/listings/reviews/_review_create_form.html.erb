<%= simple_form_for([listing, review], html: { class: "review-card" }) do |f| %>
  <!-- Preserve return path after submit -->
  <%= hidden_field_tag :return_to, (local_assigns[:return_to] || request.fullpath) %>

  <div class="review-card-body">
    <!-- Header -->
    <h5 class="review-title mb-2">Write a review</h5>
    <p class="text-muted mb-4">Share your experience with future guests.</p>

    <div class="row g-3">
      <!-- Rating (keep select for now) -->
      <div class="col-12 col-md-4">
        <%= f.input :rating,
          as: :select,
          collection: 1..5,
          include_blank: "Rating (1â€“5)",
          input_html: { class: "form-select" },
          label: "Rating" %>
      </div>

      <!-- Review content -->
      <div class="col-12">
        <div class="review-content-box">
          <div class="small text-muted mb-2">Your review</div>
          <%= f.input :content,
            as: :text,
            label: false,
            input_html: { rows: 5, class: "form-control", placeholder: "Tell us about your stay..." } %>
        </div>
      </div>

      <!-- Actions -->
      <div class="col-12 d-flex justify-content-end gap-2 mt-3">
        <!-- Submit review -->
        <%= f.button :submit, "Save review", class: "btn btn-primary rounded-pill px-4" %>

        <!-- Cancel: close the Bootstrap modal -->
        <!-- Using <a> with href="#" + data-bs-dismiss is very reliable inside forms -->
        <a href="#"
           class="btn btn-outline-secondary rounded-pill px-4"
           role="button"
           data-bs-dismiss="modal"
           aria-label="Close">
          Cancel
        </a>
      </div>
    </div>
  </div>
<% end %>
